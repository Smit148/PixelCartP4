<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{base}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Console Games - PixelCart</title>
    <style>
        .game-card {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            cursor: pointer;
        }

        .game-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            transition: filter 0.4s ease, transform 0.4s ease;
        }

        .game-card h4 {
            color: #fff;
            font-weight: 600;
            letter-spacing: 1px;
            text-align: center;
        }

        /* HOVER EFFECT */
        .game-card:hover img {
            transform: scale(1.05);
        }
    </style>
</head>

<body>
    <div layout:fragment="content">
        <section class="container my-5">
            <h2 class="text-center mb-4 text-primary-custom">Console Games</h2>

            <!-- Products from Database -->
            <div class="row g-4" th:if="${products != null and !products.isEmpty()}">
                <!-- PRODUCT CARD - PS1 Style -->
                <div class="col-md-4" th:each="p : ${products}">
                    <a th:href="@{/product-details/{id}(id=${p.id})}" class="text-decoration-none">
                        <div class="card game-card h-100 bg-dark text-white border-secondary">
                            <img th:src="@{'/image/' + ${p.id}}" class="card-img-top" th:alt="${p.name}"
                                style="height: 220px; object-fit: cover;">
                            <div class="card-body text-center">
                                <h5 class="card-title" th:text="${p.name}">Product Name</h5>
                                <div class="text-center">
                                    <h5 class="font-weight-bold text-primary-custom">
                                        ₹<span th:text="${p.discountedPrice}"></span>
                                        <small class="text-muted text-decoration-line-through fs-6">₹<span
                                                th:text="${p.sellingPrice}"></span></small>
                                    </h5>
                                </div>
                                <button class="btn btn-add-to-cart w-100 mt-2" th:data-id="${p.id}"
                                    th:data-name="${p.name}" th:data-price="${p.discountedPrice}"
                                    th:data-image="@{'/image/' + ${p.id}}" data-category="Console Games" onclick="addToCart({
                                    id: 'product-' + this.getAttribute('data-id'),
                                    name: this.getAttribute('data-name'),
                                    price: this.getAttribute('data-price'),
                                    image: this.getAttribute('data-image'),
                                    category: this.getAttribute('data-category')
                                })">
                                    <i class="fas fa-cart-plus me-2"></i>Add to Cart
                                </button>
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Empty State -->
            <div th:if="${products == null or products.isEmpty()}" class="text-center py-5">
                <h4 class="text-light">No Console Games Available</h4>
                <p class="text-muted">Check back soon for new releases!</p>
            </div>

        </section>
    </div>

    <!-- Empty State -->
    <div th:if="${products == null or products.isEmpty()}" class="text-center py-5">
        <h4 class="text-light">No Console Games Available</h4>
        <p class="text-muted">Check back soon for new releases!</p>
    </div>

    </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>